<dfinance-frontend-main-header pageName="Account Configuration"></dfinance-frontend-main-header>
<dfinance-frontend-loader [loadingFlag]="isLoading"></dfinance-frontend-loader>
<div class="row content-wrapper">
    <div class="col-md-12" style="padding: 1% 15%;">
        <div #btngroup class="btn-group form-topbar" role="group" aria-label="Account Configuration">
            <button type="button" class="btn btn-outline-secondary" (click)="onClickEditAccConfig()"
            [disabled]="isEditBtnDisabled" translate> 
                <i class="large material-icons">edit</i>Edit
            </button>
            <button type="button" class="btn btn-outline-secondary" (click)="onClickSaveAccountConfig()"
            [disabled]="isSaveBtnDisabled" translate>
                <i class="large material-icons">save</i>Save
            </button>
        </div>

        <div class="right-section">
            <form [formGroup]="accountConfigForm">
                <div class="row">
                    <div class="col-md-12">
                        <div class="section-container">
                            <div class="scrollable-content">
                                <div class="section-content">
                                    <div class="row" style="padding: 0px 15px;">
                                        <ngx-datatable class="material container user-branch-table"
                                            [rows]="accConfigData" [columnMode]="'flex'" [headerHeight]="50"
                                            [footerHeight]="50"  [rowHeight]="50"  [scrollbarV]="true" [limit]="10" 
                                            [selected]="selected" [selectionType]="SelectionType.single"
                                            (activate)="onActivate($event)" (select)="onSelect($event)"
                                            style="height: 700px;">

                                            <!-- <ngx-datatable-column name="Id" [flexGrow]="2" [hidden]="true">
                                                <ng-template let-row="row" let-rowIndex="rowIndex"
                                                    ngx-datatable-cell-template>
                                                    {{accConfigData[rowIndex].accID}}
                                                </ng-template>
                                            </ngx-datatable-column> -->
                                            <ngx-datatable-column name="Keyword" [flexGrow]="2">
                                                <ng-template let-row="row" let-rowIndex="rowIndex"
                                                    ngx-datatable-cell-template>
                                                    {{accConfigData[rowIndex].keyword}}
                                                </ng-template>
                                            </ngx-datatable-column>

                                            <ngx-datatable-column name="AccountCode" [flexGrow]="2">
                                                <ng-template let-row="row" let-rowIndex="rowIndex"
                                                    ngx-datatable-cell-template>
                                                    <dfinance-frontend-searchable-dropdown [options]="accountPopup"
                                                    [isdisabled]="isInputDisabled"
                                                    [updatedOption]="accConfigData[rowIndex].accountCode"
                                                    [returnField]="accountPopupField"
                                                    [dropdownFields]="accountPopupKeys"
                                                    (selectedOption)="onAccountPopupSelected($event,rowIndex)">
                                                </dfinance-frontend-searchable-dropdown>
                                                    <!-- {{accConfigData[rowIndex].accountCode}} -->
                                                </ng-template>
                                            </ngx-datatable-column>

                                            <ngx-datatable-column name="AccountName" [flexGrow]="2">
                                                <ng-template let-row="row" let-rowIndex="rowIndex"
                                                    ngx-datatable-cell-template>
                                                    {{accConfigData[rowIndex].accountName}}
                                                </ng-template>
                                            </ngx-datatable-column>
                                        </ngx-datatable>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>
